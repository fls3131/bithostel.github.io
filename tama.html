<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tux Pro - Historiador Master</title>
    <style>
        :root {
            --danger: #e74c3c;
            --success: #2ecc71;
            --primary: #2980b9;
            --higiene: #3498db;
            --energia: #f1c40f;
            --bg-dark: #1a252f;
        }
        body { 
            font-family: 'Segoe UI', sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; background: var(--bg-dark); margin: 0; overflow: hidden; 
        }
        .game-card { 
            background: #ecf0f1; padding: 35px; border-radius: 40px; 
            box-shadow: 0 30px 60px rgba(0,0,0,0.5); text-align: center; 
            width: 550px; position: relative; transform: scale(0.85); transform-origin: center; 
        }
        .idade-badge { 
            position: absolute; top: 25px; left: 25px; background: var(--primary); 
            color: white; padding: 8px 18px; border-radius: 20px; font-size: 0.9rem; font-weight: bold; z-index: 11; 
        }
        .ciclo-container { width: 100%; height: 10px; background: #bdc3c7; border-radius: 5px; margin: 15px 0; overflow: hidden; }
        #ciclo-bar { width: 100%; height: 100%; background: var(--primary); transition: width 0.1s linear; }
        
        .speech-bubble { 
            position: absolute; top: -75px; left: 50%; transform: translateX(-50%); 
            background: white; border-radius: 20px; padding: 18px; font-size: 1rem; 
            font-weight: bold; box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
            width: 320px; display: none; z-index: 100; border: 3px solid var(--primary); color: #2c3e50;
        }

        .pet-container { height: 180px; display: flex; justify-content: center; align-items: center; position: relative; }
        .pet-display { width: 150px; height: 150px; transition: transform 0.4s; }
        .pet-display img { width: 100%; height: auto; display: block; }
        
        /* Anima√ß√µes */
        .anim-comer { animation: eating 1s ease-in-out; }
        .anim-carinho { animation: heart-beat 1.2s ease-in-out; }
        .anim-passear { animation: walking 1s infinite linear; }
        .anim-limpar { animation: cleaning 1s ease-in-out; }
        .anim-dormir { animation: sleeping 2s ease-in-out; }
        .critical { animation: pulse-red 2s infinite; }
        
        @keyframes eating { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1) rotate(5deg); } }
        @keyframes heart-beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        @keyframes walking { 0% { transform: translateX(0); } 25% { transform: translateX(15px); } 75% { transform: translateX(-15px); } 100% { transform: translateX(0); } }
        @keyframes cleaning { 0% { transform: rotate(0); } 50% { transform: rotate(15deg); } 100% { transform: rotate(0); } }
        @keyframes sleeping { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(0.95); opacity: 0.8; } }
        @keyframes pulse-red { 0% { filter: drop-shadow(0 0 10px red); } 50% { filter: drop-shadow(0 0 25px red); } 100% { filter: drop-shadow(0 0 10px red); } }
        
        .particle { position: absolute; pointer-events: none; animation: float-up 2s forwards; font-size: 35px; z-index: 20; }
        @keyframes float-up { 0% { transform: translateY(0) opacity: 1; } 100% { transform: translateY(-120px) opacity: 0; } }

        .speed-control { margin: 15px 0; background: #dfe6e9; padding: 12px; border-radius: 20px; border: 1px solid #b2bec3; }
        input[type=range] { width: 100%; cursor: pointer; accent-color: var(--primary); }

        .stats { text-align: left; margin-bottom: 20px; }
        .bar-label { font-size: 0.8rem; font-weight: bold; display: block; margin-top: 6px; color: #34495e; }
        .bar-container { background: #ddd; border-radius: 12px; height: 10px; width: 100%; margin: 4px 0 8px; overflow: hidden; }
        .bar { height: 100%; transition: width 0.5s ease-in-out; }

        .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        button { padding: 10px; border: none; border-radius: 12px; color: white; cursor: pointer; font-weight: bold; font-size: 0.85rem; transition: 0.2s; }
        button:active { transform: scale(0.95); }
        button:disabled { background: #bdc3c7 !important; cursor: not-allowed; opacity: 0.6; }

        .btn-alimentar { background: #e67e22; }
        .btn-verde { background: var(--success); }
        .btn-higiene { background: var(--higiene); }
        .btn-descanso { background: var(--energia); color: #333; }

        #reset-btn { background: var(--bg-dark) !important; display: none; grid-column: span 2; margin-top: 15px; font-size: 1.1rem; padding: 15px; }
        #msg { min-height: 50px; font-weight: bold; margin-top: 10px; font-size: 1rem; }
        .dead { filter: grayscale(1) opacity(0.5); transform: rotate(180deg) !important; transition: 2s; }
    </style>
</head>
<body>

<div class="game-card">
    <div class="idade-badge">IDADE: <span id="idade-val">0</span> dias</div>
    <div id="balao" class="speech-bubble">Carregando hist√≥ria...</div>
        
    <div class="pet-container" id="container">
        <div id="pet-visual" class="pet-display">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Tux.png" alt="Tux">
        </div>
    </div>
        
    <div class="ciclo-container">
        <div id="ciclo-bar"></div>
    </div>

    <div class="speed-control">
        <label id="speed-title" style="font-weight: bold; display:block; font-size: 0.8rem;">VELOCIDADE: N√çVEL 01</label>
        <input type="range" id="speed-slider" min="0" max="4" step="1" value="0" oninput="mudarVelocidade(this.value)">
    </div>
        
    <div class="stats">
        <span class="bar-label">üêü FOME</span>
        <div class="bar-container"><div id="fome-bar" class="bar" style="background:var(--danger)"></div></div>
        <span class="bar-label">üòä FELICIDADE</span>
        <div class="bar-container"><div id="felicidade-bar" class="bar" style="background:var(--success)"></div></div>
        <span class="bar-label">üåä HIGIENE</span>
        <div class="bar-container"><div id="higiene-bar" class="bar" style="background:var(--higiene)"></div></div>
        <span class="bar-label">‚ö° ENERGIA</span>
        <div class="bar-container"><div id="energia-bar" class="bar" style="background:var(--energia)"></div></div>
    </div>

    <div class="actions">
        <button class="btn-action btn-alimentar" onclick="interagir('alimentar')">Dar Peixe</button>
        <button class="btn-action btn-verde" onclick="interagir('carinho')">Cafun√©</button>
        <button class="btn-action btn-verde" onclick="interagir('passear')">Escorregar</button>
        <button class="btn-action btn-descanso" onclick="interagir('descansar')">Cochilar</button>
        <button class="btn-action btn-higiene" onclick="interagir('banho')">Mergulho</button>
        <button class="btn-action btn-higiene" onclick="interagir('rosto')">Limpar Bico</button>
        <button id="reset-btn" onclick="location.reload()">REANIMAR TUX</button>
    </div>
    <div id="msg"></div>
</div>

<script>
    let fome = 20, felicidade = 80, higiene = 100, energia = 100, idade = 0;
    let vivo = true, nomePet = "Tux";
    let gameLoop, visualLoop;
    
    const fatosHistoricos = [
        "1969: O homem pisa na Lua pela 1¬™ vez! üöÄ", "1906: Santos Dumont voa com o 14-Bis! ‚úàÔ∏è",
        "1945: Fim da 2¬™ Guerra Mundial. ‚òÆÔ∏è", "1500: Brasil √© descoberto por Cabral. üáßüá∑",
        "1989: Queda do Muro de Berlim. üß±", "1503: Mona Lisa come√ßa a ser pintada. üé®",
        "476: Queda do Imp√©rio Romano do Ocidente. üèõÔ∏è", "1905: Einstein cria a Teoria da Relatividade. üß†",
        "1789: In√≠cio da Revolu√ß√£o Francesa. üá´üá∑", "1969: Nasce a Arpanet (m√£e da Internet). üåê",
        "1996: Tux vira mascote oficial do Linux! üêß", "1876: Telefone √© patenteado por Bell. üìû",
        "1929: A quebra da Bolsa de NY inicia a crise. üìâ", "1953: DNA tem sua estrutura descoberta. üß¨",
        "1912: O Titanic naufraga no Atl√¢ntico. üö¢", "1964: Martin Luther King ganha o Nobel. üïäÔ∏è",
        "1888: Aboli√ß√£o da escravid√£o no Brasil. ‚õìÔ∏è", "1889: Proclama√ß√£o da Rep√∫blica no Brasil. üëë",
        "1947: Gandhi conquista independ√™ncia da √çndia. üáÆüá≥", "1985: Rock in Rio acontece pela 1¬™ vez. üé∏",
        "1822: Dom Pedro I declara Independ√™ncia. ‚öîÔ∏è", "1994: Nelson Mandela assume na √Åfrica do Sul. üáøüá¶",
        "1977: Lan√ßamento do 1¬∫ filme Star Wars. üåå", "1908: Henry Ford lan√ßa o Modelo T. üöó",
        "1928: Penicilina √© descoberta por Fleming. üíä", "2004: O Facebook √© criado por Zuckerberg. üíª",
        "1957: Sputnik 1 √© o 1¬∫ sat√©lite no espa√ßo. üì°", "1455: Gutenberg imprime a 1¬™ B√≠blia. üìñ",
        "1990: Nelson Mandela √© libertado. üîì", "1914: In√≠cio da 1¬™ Guerra Mundial. ‚öîÔ∏è",
        "1932: Mulheres ganham direito ao voto no BR. üó≥Ô∏è", "1981: Lan√ßamento do primeiro PC da IBM. üñ•Ô∏è",
        "2007: Steve Jobs lan√ßa o 1¬∫ iPhone. üì±", "1972: Atari lan√ßa o jogo Pong! üïπÔ∏è",
        "1941: Ataque japon√™s a Pearl Harbor. ‚úàÔ∏è", "1896: 1¬™ Olimp√≠ada da Era Moderna (Atenas). üèÖ",
        "1666: Newton observa a gravidade (ma√ß√£). üçé", "1939: In√≠cio da 2¬™ Guerra Mundial. üí•",
        "1997: O rob√¥ Deep Blue vence Kasparov. ‚ôüÔ∏è", "1962: Crise dos M√≠sseis em Cuba. ‚ò¢Ô∏è",
        "1986: Desastre nuclear em Chernobyl. ‚ò£Ô∏è", "1955: Rosa Parks recusa ceder lugar no √¥nibus. üöå",
        "1961: Yuri Gagarin √© o 1¬∫ homem no espa√ßo. üë®‚ÄçüöÄ", "1901: 1¬∫ Pr√™mio Nobel √© entregue. üèÜ",
        "1808: Fam√≠lia Real Portuguesa chega ao BR. üö¢", "1948: Cria√ß√£o do Estado de Israel. üáÆüá±",
        "1973: 1¬™ chamada de celular da hist√≥ria. üìû", "1991: Dissolu√ß√£o da Uni√£o Sovi√©tica. üá∑üá∫",
        "2001: Ataque √†s Torres G√™meas (11/09). üóΩ", "1922: Semana de Arte Moderna em SP. üé®",
        "1968: O ano que n√£o terminou (protestos). üì¢", "1946: Criado o ENIAC (1¬∫ computador). üíæ",
        "1839: Inven√ß√£o do Daguerre√≥tipo (Foto). üì∏", "1954: Funda√ß√£o da cidade de Bras√≠lia. üèóÔ∏è",
        "1971: Enviado o 1¬∫ e-mail do mundo. üìß", "1995: Lan√ßamento do Windows 95. üíø",
        "1347: Peste Negra devasta a Europa. üêÅ", "1517: Lutero inicia a Reforma Protestante. üìú",
        "1760: In√≠cio da Revolu√ß√£o Industrial. üè≠", "1859: Darwin publica 'Origem das Esp√©cies'. ü¶ç",
        "1949: Proclama√ß√£o da Rep√∫blica na China. üá®üá≥", "1960: Beatles come√ßam a tocar em Hamburgo. üé∏",
        "1992: Rio-92 debate o meio ambiente. üåé", "1984: Apple lan√ßa o computador Macintosh. üçé",
        "1903: Irm√£os Wright voam nos EUA. üõ©Ô∏è", "1519: Fern√£o de Magalh√£es inicia volta ao mundo. ‚õµ",
        "1865: Fim da Guerra Civil Americana. üá∫üá∏", "1950: 1¬™ Copa do Mundo no Brasil. ‚öΩ",
        "1994: Ayrton Senna falece em √çmola. üèéÔ∏è", "2000: O temido Bug do Mil√™nio n√£o ocorreu. üëæ",
        "1844: 1¬™ mensagem de c√≥digo Morse enviada. üìü", "1963: Martin Luther King: 'I have a dream'. üó£Ô∏è"
    ];

    const tempos = [20000, 30000, 40000, 50000, 60000];
    let tempoAtual = tempos[0];
    let tempoRestante = tempoAtual;
    
    const elPet = document.getElementById('pet-visual');
    const elBalao = document.getElementById('balao');
    const elCicloBar = document.getElementById('ciclo-bar');

    function mudarVelocidade(index) {
        tempoAtual = tempos[index];
        tempoRestante = tempoAtual;
        document.getElementById('speed-title').innerText = "VELOCIDADE: " + (parseInt(index)+1);
        if (vivo) iniciarLoops();
    }

    function iniciarLoops() {
        clearInterval(gameLoop);
        clearInterval(visualLoop);
        gameLoop = setInterval(() => {
            if (vivo) {
                idade++;
                fome = Math.min(100, fome + 12);
                felicidade = Math.max(0, felicidade - 10);
                higiene = Math.max(0, higiene - 8);
                energia = Math.max(0, energia - 10);
                tempoRestante = tempoAtual;

                const fatoAleatorio = fatosHistoricos[Math.floor(Math.random() * fatosHistoricos.length)];
                falar(fatoAleatorio, 12000); // Exibe por 12 segundos

                verificarMorte();
                atualizarInterface();
                elCicloBar.style.backgroundColor = "white";
                setTimeout(() => elCicloBar.style.backgroundColor = "var(--primary)", 100);
            }
        }, tempoAtual);

        visualLoop = setInterval(() => {
            if (vivo) {
                tempoRestante -= 100;
                elCicloBar.style.width = Math.max(0, (tempoRestante / tempoAtual) * 100) + "%";
            }
        }, 100);
    }

    function verificarMorte() {
        if (fome >= 100 || felicidade <= 0 || higiene <= 0 || energia <= 0) {
            vivo = false;
            finalizarJogo();
        }
    }

    function falar(texto, tempo = 3000) {
        if (!vivo) return;
        elBalao.innerText = texto;
        elBalao.style.display = 'block';
        setTimeout(() => { if(vivo) elBalao.style.display = 'none'; }, tempo);
    }

    function criarParticula(emoji) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.innerText = emoji;
        p.style.left = (Math.random() * 60 + 20) + '%';
        document.getElementById('container').appendChild(p);
        setTimeout(() => p.remove(), 2000);
    }

    function atualizarInterface() {
        fome = Math.max(0, Math.min(100, fome));
        felicidade = Math.max(0, Math.min(100, felicidade));
        higiene = Math.max(0, Math.min(100, higiene));
        energia = Math.max(0, Math.min(100, energia));

        document.getElementById('fome-bar').style.width = fome + "%";
        document.getElementById('felicidade-bar').style.width = felicidade + "%";
        document.getElementById('higiene-bar').style.width = higiene + "%";
        document.getElementById('energia-bar').style.width = energia + "%";
        document.getElementById('idade-val').innerText = idade;
        
        const elMsg = document.getElementById('msg');
        if (vivo) {
            if (fome >= 75 || felicidade <= 30 || higiene <= 30 || energia <= 30) {
                elPet.classList.add('critical');
                elMsg.innerHTML = `<span style="color: var(--danger)">Situa√ß√£o Cr√≠tica!</span>`;
            } else {
                elPet.classList.remove('critical');
                elMsg.innerHTML = `<span style="color: var(--success)">Aprenda com ${nomePet}! üìö</span>`;
            }
        }
    }

    function finalizarJogo() {
        clearInterval(gameLoop);
        clearInterval(visualLoop);
        elPet.classList.add('dead');
        elBalao.style.display = 'none';
        elCicloBar.style.width = "0%";
        document.getElementById('msg').innerHTML = `
            <div style="color: var(--danger); font-size: 1.5rem; font-weight: bold;">FIM DA HIST√ìRIA</div>
            <div style="font-size: 0.9rem;">${nomePet} partiu ap√≥s ${idade} anos de conhecimento.</div>
        `;
        document.querySelectorAll('.btn-action').forEach(b => b.disabled = true);
        document.getElementById('speed-slider').disabled = true;
        document.getElementById('reset-btn').style.display = 'block';
    }

    function interagir(tipo) {
        if (!vivo) return;
        elPet.classList.remove('anim-comer', 'anim-carinho', 'anim-passear', 'anim-limpar', 'anim-dormir');
        void elPet.offsetWidth; 

        switch(tipo) {
            case 'alimentar':
                fome -= 35; higiene -= 15; energia += 5;
                elPet.classList.add('anim-comer');
                criarParticula('üêü');
                break;
            case 'carinho':
                felicidade += 20; fome += 5;
                elPet.classList.add('anim-carinho');
                criarParticula('üíô');
                break;
            case 'passear':
                felicidade += 30; energia -= 35; higiene -= 15;
                elPet.classList.add('anim-passear');
                break;
            case 'descansar':
                energia += 60; fome += 25; felicidade -= 15;
                elPet.classList.add('anim-dormir');
                criarParticula('üí§');
                break;
            case 'banho':
                higiene = 100; felicidade -= 10; energia -= 10;
                elPet.classList.add('anim-limpar');
                criarParticula('üåä');
                break;
            case 'rosto':
                higiene += 25;
                elPet.classList.add('anim-limpar');
                criarParticula('üí¶');
                break;
        }
        verificarMorte();
        atualizarInterface();
    }

    window.onload = () => {
        let n = prompt("Nome do seu Pinguim Historiador:", "Tux");
        if(n) nomePet = n;
        atualizarInterface();
        iniciarLoops();
    };
</script>
</body>
</html>
