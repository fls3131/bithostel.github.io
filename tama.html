<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamagoshi Pro - Desafio da Felicidade</title>
    <style>
        :root {
            --danger: #e74c3c;
            --success: #2ecc71;
            --primary: #3498db;
            --higiene: #9b59b6;
            --energia: #f1c40f;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: #2c3e50; 
            margin: 0; 
            overflow: hidden;
        }

        .game-card { 
            background: white; 
            padding: 30px; 
            border-radius: 30px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); 
            text-align: center; 
            width: 360px; 
            position: relative;
        }

        /* Contador de Dias */
        .idade-badge {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #34495e;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .speech-bubble {
            position: absolute;
            top: -20px;
            right: 20px;
            background: #f1f1f1;
            border-radius: 15px;
            padding: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            max-width: 120px;
            display: none;
            z-index: 10;
        }
        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 20px;
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: #f1f1f1 transparent;
        }

        .pet-container {
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .pet-display { font-size: 100px; display: inline-block; z-index: 5; transition: transform 0.4s; }

        /* Anima√ß√µes */
        .anim-comer { animation: eating 1s ease-in-out; }
        .anim-carinho { animation: heart-beat 1.2s ease-in-out; }
        .anim-passear { animation: walking 1s infinite linear; }
        .anim-limpar { animation: cleaning 1s ease-in-out; }
        .anim-dormir { animation: sleeping 2s ease-in-out; }
        .critical { animation: pulse-red 2s infinite; }

        @keyframes eating { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2) rotate(5deg); } }
        @keyframes heart-beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes walking { 0% { transform: translateX(0); } 25% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); } }
        @keyframes cleaning { 0% { transform: rotate(0); } 50% { transform: rotate(20deg) scale(1.1); } 100% { transform: rotate(0); } }
        @keyframes sleeping { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(0.9); opacity: 0.7; } }
        @keyframes pulse-red { 0% { filter: drop-shadow(0 0 0px red); } 50% { filter: drop-shadow(0 0 15px red); } 100% { filter: drop-shadow(0 0 0px red); } }

        .particle { position: absolute; pointer-events: none; animation: float-up 2s forwards; font-size: 24px; }
        @keyframes float-up { 0% { transform: translateY(0) opacity: 1; } 100% { transform: translateY(-120px) opacity: 0; } }

        .stats { text-align: left; margin-bottom: 20px; }
        .bar-label { font-size: 0.7rem; font-weight: bold; display: block; margin-top: 5px; }
        .bar-container { background: #eee; border-radius: 10px; height: 8px; width: 100%; margin: 2px 0 8px; overflow: hidden; }
        .bar { height: 100%; transition: width 0.8s ease-in-out; }
        .fome-bar { background: var(--danger); }
        .felicidade-bar { background: var(--success); }
        .higiene-bar { background: var(--higiene); }
        .energia-bar { background: var(--energia); }

        .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        button { padding: 8px; border: none; border-radius: 10px; background: var(--primary); color: white; cursor: pointer; font-weight: bold; font-size: 0.75rem; transition: 0.2s; }
        button:active { transform: scale(0.95); }
        button:disabled { background: #bdc3c7; cursor: not-allowed; }

        .btn-higiene { background: var(--higiene); }
        .btn-descanso { background: var(--energia); color: #333; }

        #msg { height: 35px; font-weight: bold; margin-top: 10px; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; }
        .dead { filter: grayscale(1); transform: rotate(180deg) !important; transition: 2s; }
    </style>
</head>
<body>

<div class="game-card">
    <div class="idade-badge">IDADE: <span id="idade-val">0</span> dias</div>
    <div id="balao" class="speech-bubble">Miau!</div>
    <div class="pet-container" id="container">
        <div id="pet-emoji" class="pet-display">üê±</div>
    </div>
    
    <div class="stats">
        <span class="bar-label">üçñ FOME</span>
        <div class="bar-container"><div id="fome-bar" class="bar fome-bar"></div></div>
        
        <span class="bar-label">üòä FELICIDADE (Drenagem R√°pida)</span>
        <div class="bar-container"><div id="felicidade-bar" class="bar felicidade-bar"></div></div>

        <span class="bar-label">üßº HIGIENE</span>
        <div class="bar-container"><div id="higiene-bar" class="bar higiene-bar"></div></div>

        <span class="bar-label">‚ö° ENERGIA</span>
        <div class="bar-container"><div id="energia-bar" class="bar energia-bar"></div></div>
    </div>

    <div class="actions">
        <button onclick="interagir('alimentar')">Alimentar</button>
        <button onclick="interagir('carinho')">Carinho</button>
        <button onclick="interagir('passear')">Passear</button>
        <button onclick="interagir('descansar')" class="btn-descanso">Descansar</button>
        <button onclick="interagir('banho')" class="btn-higiene">Dar Banho</button>
        <button onclick="interagir('rosto')" class="btn-higiene">Lavar Rosto</button>
        <button onclick="interagir('maos')" class="btn-higiene" style="grid-column: span 2;">Lavar M√£os</button>
        
        <button id="reset-btn" onclick="location.reload()" style="grid-column: span 2; display: none; background: var(--success);">Tentar Novamente</button>
    </div>
    <p id="msg"></p>
</div>

<script>
    let fome = 20;
    let felicidade = 80;
    let higiene = 100;
    let energia = 100;
    let idade = 0;
    let vivo = true;
    const elEmoji = document.getElementById('pet-emoji');
    const elBalao = document.getElementById('balao');

    function falar(texto, tempo = 3000) {
        elBalao.innerText = texto;
        elBalao.style.display = 'block';
        setTimeout(() => { if(vivo) elBalao.style.display = 'none'; }, tempo);
    }

    function criarParticula(emoji) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.innerText = emoji;
        p.style.left = (Math.random() * 60 + 20) + '%';
        document.getElementById('container').appendChild(p);
        setTimeout(() => p.remove(), 2000);
    }

    function atualizarInterface() {
        document.getElementById('fome-bar').style.width = fome + "%";
        document.getElementById('felicidade-bar').style.width = felicidade + "%";
        document.getElementById('higiene-bar').style.width = higiene + "%";
        document.getElementById('energia-bar').style.width = energia + "%";
        document.getElementById('idade-val').innerText = idade;
        
        if (vivo) {
            let avisos = [];
            if (felicidade <= 40) avisos.push("Estou muito triste! üò¢");
            else if (fome >= 70) avisos.push("Fominha... üçñ");
            else if (higiene <= 30) avisos.push("Que sujeira! üßº");
            else if (energia <= 30) avisos.push("Que sono... üí§");

            if (avisos.length > 0) {
                elEmoji.classList.add('critical');
                document.getElementById('msg').innerText = avisos[0];
                document.getElementById('msg').style.color = 'var(--danger)';
            } else {
                elEmoji.classList.remove('critical');
                document.getElementById('msg').innerText = "Estou bem! ‚ú®";
                document.getElementById('msg').style.color = 'var(--success)';
            }
        }

        if (!vivo) {
            elEmoji.innerText = "üíÄ";
            elEmoji.classList.add('dead');
            falar("Fui... ü™¶");
            document.getElementById('msg').innerText = "GAME OVER";
            document.querySelectorAll('button').forEach(b => b.disabled = true);
            document.getElementById('reset-btn').style.display = 'block';
            document.getElementById('reset-btn').disabled = false;
        }
    }

    // CICLO DE VIDA: 20 SEGUNDOS
    setInterval(() => {
        if (vivo) {
            idade++; // A cada ciclo ele fica mais velho
            fome += 6;
            felicidade -= 15; // FELICIDADE CAI O DOBRO DO RITMO NORMAL
            higiene -= 8;
            energia -= 7;
            
            if (fome >= 100 || felicidade <= 0 || higiene <= 0 || energia <= 0) vivo = false;
            atualizarInterface();
        }
    }, 20000);

    function interagir(tipo) {
        if (!vivo) return;
        elEmoji.classList.remove('anim-comer', 'anim-carinho', 'anim-passear', 'anim-limpar', 'anim-dormir');
        void elEmoji.offsetWidth;

        switch(tipo) {
            case 'alimentar':
                fome = Math.max(0, fome - 25);
                higiene = Math.max(0, higiene - 5);
                elEmoji.classList.add('anim-comer');
                criarParticula('üçé');
                falar("Del√≠cia! üòã");
                break;
            case 'carinho':
                felicidade = Math.min(100, felicidade + 25);
                elEmoji.classList.add('anim-carinho');
                criarParticula('‚ù§Ô∏è');
                falar("Miau! ‚ù§Ô∏è");
                break;
            case 'passear':
                felicidade = Math.min(100, felicidade + 30);
                fome = Math.min(100, fome + 15);
                higiene = Math.max(0, higiene - 20);
                energia = Math.max(0, energia - 15);
                elEmoji.classList.add('anim-passear');
                falar("Uhuuu! üå≥");
                break;
            case 'descansar':
                energia = 100;
                fome = Math.min(100, fome + 12);
                elEmoji.classList.add('anim-dormir');
                criarParticula('üí§');
                falar("Zzz... üò¥");
                break;
            case 'banho':
                higiene = 100;
                elEmoji.classList.add('anim-limpar');
                criarParticula('üßº');
                falar("Limpinho! ‚ú®");
                break;
            case 'rosto':
                higiene = Math.min(100, higiene + 40);
                elEmoji.classList.add('anim-limpar');
                criarParticula('üí¶');
                falar("Fresquinho! üí¶");
                break;
            case 'maos':
                higiene = Math.min(100, higiene + 20);
                elEmoji.classList.add('anim-limpar');
                criarParticula('üßº');
                falar("M√£os ok! üëç");
                break;
        }
        if (fome >= 100 || felicidade <= 0 || higiene <= 0 || energia <= 0) vivo = false;
        atualizarInterface();
    }

    window.onload = atualizarInterface;
</script>
</body>
</html>
