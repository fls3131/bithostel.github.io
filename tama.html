<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tux Pro - Mobile Edition</title>
    <style>
        :root {
            --danger: #e74c3c;
            --success: #2ecc71;
            --primary: #2980b9;
            --higiene: #3498db;
            --energia: #f1c40f;
            --bg-dark: #1a252f;
        }

        * { box-sizing: border-box; }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            display: flex; flex-direction: column; align-items: center; 
            min-height: 100vh; background: var(--bg-dark); margin: 0; padding-bottom: 20px;
        }

        /* --- CABE√áALHO --- */
        .header-nav {
            width: 100%; background: rgba(0, 0, 0, 0.4); padding: 12px 15px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--primary); sticky: top;
        }
        .header-nav h1 { color: white; margin: 0; font-size: 1rem; }
        .header-nav a {
            color: var(--success); text-decoration: none; font-weight: bold;
            font-size: 0.75rem; border: 1px solid var(--success); padding: 4px 10px;
            border-radius: 15px;
        }

        /* --- CARD DO JOGO (RESPONSIVO) --- */
        .game-card { 
            background: #ecf0f1; padding: 20px; border-radius: 25px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.5); text-align: center; 
            width: 95%; max-width: 500px; position: relative;
            margin-top: 80px; /* Espa√ßo para o bal√£o de fala */
        }

        .idade-badge, .fatos-badge { 
            position: absolute; top: -15px; background: var(--primary); 
            color: white; padding: 5px 12px; border-radius: 15px; font-size: 0.75rem; font-weight: bold; z-index: 11; 
        }
        .idade-badge { left: 15px; }
        .fatos-badge { right: 15px; background: #8e44ad; }

        .ciclo-container { width: 100%; height: 8px; background: #bdc3c7; border-radius: 4px; margin: 15px 0; overflow: hidden; }
        #ciclo-bar { width: 100%; height: 100%; background: var(--primary); }
        
        /* BAL√ÉO ADAPTADO */
        .speech-bubble { 
            position: absolute; top: -85px; left: 50%; transform: translateX(-50%); 
            background: white; border-radius: 15px; padding: 12px; font-size: 0.85rem; 
            font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
            width: 90%; max-width: 380px; display: none; z-index: 100; border: 3px solid var(--primary);
        }

        .pet-container { height: 140px; display: flex; justify-content: center; align-items: center; position: relative; }
        .pet-display { width: 110px; height: 110px; transition: transform 0.4s; }
        .pet-display img { width: 100%; height: auto; }
        
        /* ANIMA√á√ïES */
        @keyframes eating { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .anim-comer { animation: eating 0.8s ease-in-out; }
        .critical { animation: pulse-red 2s infinite; }
        @keyframes pulse-red { 0%, 100% { filter: drop-shadow(0 0 5px red); } 50% { filter: drop-shadow(0 0 15px red); } }
        
        .particle { position: absolute; pointer-events: none; animation: float-up 1.5s forwards; font-size: 30px; }
        @keyframes float-up { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-80px); opacity: 0; } }

        .speed-control { margin: 10px 0; background: #dfe6e9; padding: 10px; border-radius: 15px; }
        input[type=range] { width: 100%; margin-top: 5px; }

        .stats { text-align: left; margin-bottom: 15px; }
        .bar-label { font-size: 0.65rem; font-weight: bold; color: #34495e; }
        .bar-container { background: #ddd; border-radius: 10px; height: 8px; width: 100%; margin: 2px 0 6px; overflow: hidden; }
        .bar { height: 100%; transition: width 0.5s; }

        /* BOT√ïES MOBILE */
        .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        button { padding: 12px 5px; border: none; border-radius: 10px; color: white; cursor: pointer; font-weight: bold; font-size: 0.75rem; }
        
        #reset-btn { background: var(--bg-dark) !important; display: none; grid-column: span 2; margin-top: 10px; padding: 15px; }
        #msg { min-height: 40px; font-weight: bold; margin-top: 8px; font-size: 0.8rem; }
        .dead { filter: grayscale(1); transform: rotate(180deg) !important; }
    </style>
</head>
<body>

<nav class="header-nav">
    <h1>TUX MOBILE</h1>
    <a href="manualtama.html">MANUAL</a>
</nav>

<div class="game-card">
    <div class="idade-badge">IDADE: <span id="idade-val">0</span>d</div>
    <div class="fatos-badge">FATOS: <span id="fatos-val">0</span></div>
    <div id="balao" class="speech-bubble">Ol√°!</div>
        
    <div class="pet-container" id="container">
        <div id="pet-visual" class="pet-display">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Tux.png" alt="Tux">
        </div>
    </div>
        
    <div class="ciclo-container">
        <div id="ciclo-bar"></div>
    </div>

    <div class="speed-control">
        <label id="speed-title" style="font-weight: bold; display:block; font-size: 0.65rem;">VELOCIDADE</label>
        <input type="range" id="speed-slider" min="0" max="4" step="1" value="0" oninput="mudarVelocidade(this.value)">
    </div>
        
    <div class="stats">
        <span class="bar-label">üêü FOME</span>
        <div class="bar-container"><div id="fome-bar" class="bar" style="background:var(--danger)"></div></div>
        <span class="bar-label">üòä FELICIDADE</span>
        <div class="bar-container"><div id="felicidade-bar" class="bar" style="background:var(--success)"></div></div>
        <span class="bar-label">üåä HIGIENE</span>
        <div class="bar-container"><div id="higiene-bar" class="bar" style="background:var(--higiene)"></div></div>
        <span class="bar-label">‚ö° ENERGIA</span>
        <div class="bar-container"><div id="energia-bar" class="bar" style="background:var(--energia)"></div></div>
    </div>

    <div class="actions">
        <button class="btn-action btn-alimentar" onclick="interagir('alimentar')">ALIMENTAR</button>
        <button class="btn-action btn-verde" onclick="interagir('carinho')">CARINHO</button>
        <button class="btn-action btn-verde" onclick="interagir('passear')">PASSEAR</button>
        <button class="btn-action btn-descanso" onclick="interagir('descansar')">DORMIR</button>
        <button class="btn-action btn-higiene" onclick="interagir('banho')">BANHO</button>
        <button class="btn-action btn-higiene" onclick="interagir('rosto')">LIMPAR</button>
        <button id="reset-btn" onclick="location.reload()">RECOME√áAR</button>
    </div>
    <div id="msg"></div>
</div>

<script>
    // A L√≥gica permanece a mesma do c√≥digo anterior para garantir funcionalidade
    let fome = 20, felicidade = 80, higiene = 100, energia = 100, idade = 0, fatosLidos = 0;
    let vivo = true, nomePet = "Tux";
    let gameLoop, visualLoop, falaTimeout;
    
    // [O array fatosHistoricos deve ser mantido aqui conforme sua vers√£o original]
    const fatosHistoricos = ["1969: Homem na Lua üöÄ", "1996: Tux nasce! üêß", "2009: Bitcoin lan√ßado ‚Çø"]; // Reduzi para exemplo, mantenha sua lista completa

    const tempos = [20000, 30000, 40000, 50000, 60000];
    let tempoAtual = tempos[0];
    let tempoRestante = tempoAtual;
    
    const elPet = document.getElementById('pet-visual');
    const elBalao = document.getElementById('balao');
    const elCicloBar = document.getElementById('ciclo-bar');

    function mudarVelocidade(index) {
        tempoAtual = tempos[index];
        tempoRestante = tempoAtual;
        document.getElementById('speed-title').innerText = "VELOCIDADE: N√çVEL " + (parseInt(index)+1);
        if (vivo) iniciarLoops();
    }

    function falar(texto, tempo) {
        if (!vivo) return;
        elBalao.innerText = texto;
        elBalao.style.display = 'block';
        if (falaTimeout) clearTimeout(falaTimeout);
        falaTimeout = setTimeout(() => { if(vivo) elBalao.style.display = 'none'; }, tempo - 200); 
    }

    function iniciarLoops() {
        clearInterval(gameLoop); clearInterval(visualLoop);
        const fato = fatosHistoricos[Math.floor(Math.random() * fatosHistoricos.length)];
        falar(fato, tempoAtual);
        
        gameLoop = setInterval(() => {
            if (vivo) {
                idade++; 
                fome = Math.min(100, fome + 12);
                felicidade = Math.max(0, felicidade - 10);
                higiene = Math.max(0, higiene - 8);
                energia = Math.max(0, energia - 10);
                tempoRestante = tempoAtual;
                fatosLidos++;
                document.getElementById('fatos-val').innerText = fatosLidos;
                falar(fatosHistoricos[Math.floor(Math.random() * fatosHistoricos.length)], tempoAtual);
                verificarMorte(); atualizarInterface();
            }
        }, tempoAtual);

        visualLoop = setInterval(() => {
            if (vivo) {
                tempoRestante -= 100;
                elCicloBar.style.width = (tempoRestante / tempoAtual * 100) + "%";
            }
        }, 100);
    }

    function verificarMorte() {
        if (fome >= 100 || felicidade <= 0 || higiene <= 0 || energia <= 0) {
            vivo = false;
            elPet.classList.add('dead');
            document.getElementById('msg').innerHTML = "<span style='color:red'>FIM DE JOGO</span>";
            document.getElementById('reset-btn').style.display = 'block';
            clearInterval(gameLoop);
        }
    }

    function interagir(tipo) {
        if (!vivo) return;
        elPet.classList.remove('anim-comer');
        void elPet.offsetWidth;
        if(tipo === 'alimentar') { fome -= 30; elPet.classList.add('anim-comer'); }
        if(tipo === 'carinho') felicidade += 20;
        if(tipo === 'banho') higiene = 100;
        if(tipo === 'descansar') energia += 50;
        atualizarInterface();
    }

    function atualizarInterface() {
        document.getElementById('fome-bar').style.width = fome + "%";
        document.getElementById('felicidade-bar').style.width = felicidade + "%";
        document.getElementById('higiene-bar').style.width = higiene + "%";
        document.getElementById('energia-bar').style.width = energia + "%";
        document.getElementById('idade-val').innerText = idade;
    }

    window.onload = () => {
        nomePet = prompt("Nome do Tux:", "Tux") || "Tux";
        iniciarLoops();
    };
</script>
</body>
</html>
