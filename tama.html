<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamagoshi Pro - Estrat√©gia Real</title>
    <style>
        :root {
            --danger: #e74c3c;
            --success: #2ecc71;
            --primary: #3498db;
            --higiene: #9b59b6;
            --energia: #f1c40f;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: #2c3e50; 
            margin: 0; 
            overflow: hidden;
        }

        .game-card { 
            background: white; 
            padding: 25px; 
            border-radius: 30px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); 
            text-align: center; 
            width: 380px; 
            position: relative;
        }

        .idade-badge {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #34495e;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .speech-bubble {
            position: absolute;
            top: -15px;
            right: 20px;
            background: #f1f1f1;
            border-radius: 15px;
            padding: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            max-width: 120px;
            display: none;
            z-index: 10;
        }

        .pet-container {
            height: 130px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .pet-display { font-size: 90px; display: inline-block; transition: transform 0.4s; }

        /* Anima√ß√µes */
        .anim-comer { animation: eating 1s ease-in-out; }
        .anim-carinho { animation: heart-beat 1.2s ease-in-out; }
        .anim-passear { animation: walking 1s infinite linear; }
        .anim-limpar { animation: cleaning 1s ease-in-out; }
        .anim-dormir { animation: sleeping 2s ease-in-out; }
        .critical { animation: pulse-red 2s infinite; }

        @keyframes eating { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2) rotate(5deg); } }
        @keyframes heart-beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes walking { 0% { transform: translateX(0); } 25% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); } }
        @keyframes cleaning { 0% { transform: rotate(0); } 50% { transform: rotate(20deg) scale(1.1); } 100% { transform: rotate(0); } }
        @keyframes sleeping { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(0.9); opacity: 0.7; } }
        @keyframes pulse-red { 0% { filter: drop-shadow(0 0 0px red); } 50% { filter: drop-shadow(0 0 15px red); } 100% { filter: drop-shadow(0 0 0px red); } }

        .particle { position: absolute; pointer-events: none; animation: float-up 2s forwards; font-size: 24px; }
        @keyframes float-up { 0% { transform: translateY(0) opacity: 1; } 100% { transform: translateY(-100px) opacity: 0; } }

        .stats { text-align: left; margin-bottom: 15px; }
        .bar-label { font-size: 0.65rem; font-weight: bold; display: block; margin-top: 4px; }
        .bar-container { background: #eee; border-radius: 10px; height: 7px; width: 100%; margin: 2px 0 6px; overflow: hidden; }
        .bar { height: 100%; transition: width 0.5s ease-in-out; }
        .fome-bar { background: var(--danger); }
        .felicidade-bar { background: var(--success); }
        .higiene-bar { background: var(--higiene); }
        .energia-bar { background: var(--energia); }

        .speed-control { margin: 15px 0; background: #f8f9fa; padding: 12px; border-radius: 15px; border: 1px solid #ddd; }
        .speed-control label { font-size: 0.8rem; font-weight: bold; display: block; margin-bottom: 8px; color: #2c3e50; }
        #speed-desc { color: var(--primary); font-size: 0.75rem; display: block; margin-top: 5px; }
        input[type=range] { width: 100%; cursor: pointer; accent-color: var(--primary); }

        .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        button { padding: 8px; border: none; border-radius: 10px; background: var(--primary); color: white; cursor: pointer; font-weight: bold; font-size: 0.7rem; transition: 0.2s; }
        button:active { transform: scale(0.95); }
        button:disabled { background: #bdc3c7; cursor: not-allowed; opacity: 0.6; }

        .btn-higiene { background: var(--higiene); }
        .btn-descanso { background: var(--energia); color: #333; }
        #reset-btn { background: var(--success) !important; opacity: 1 !important; display: none; grid-column: span 2; margin-top: 10px; font-size: 0.9rem; }

        #msg { min-height: 50px; font-weight: bold; margin-top: 5px; font-size: 0.85rem; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .final-score { font-size: 1.1rem; color: #2c3e50; margin-top: 8px; background: #f1c40f; padding: 8px 15px; border-radius: 15px; }
    </style>
</head>
<body>

<div class="game-card">
    <div class="idade-badge">IDADE: <span id="idade-val">0</span> dias</div>
    <div id="balao" class="speech-bubble">Miau!</div>
    
    <div class="pet-container" id="container">
        <div id="pet-emoji" class="pet-display">üê±</div>
    </div>

    <div class="speed-control">
        <label id="speed-title">VELOCIDADE: N√çVEL 01</label>
        <input type="range" id="speed-slider" min="0" max="4" step="1" value="0" oninput="mudarVelocidade(this.value)">
        <span id="speed-desc">R√°pido (20s)</span>
    </div>
    
    <div class="stats">
        <span class="bar-label">üçñ FOME (Menos √© melhor)</span>
        <div class="bar-container"><div id="fome-bar" class="bar fome-bar"></div></div>
        <span class="bar-label">üòä FELICIDADE</span>
        <div class="bar-container"><div id="felicidade-bar" class="bar felicidade-bar"></div></div>
        <span class="bar-label">üßº HIGIENE</span>
        <div class="bar-container"><div id="higiene-bar" class="bar higiene-bar"></div></div>
        <span class="bar-label">‚ö° ENERGIA</span>
        <div class="bar-container"><div id="energia-bar" class="bar energia-bar"></div></div>
    </div>

    <div class="actions">
        <button class="btn-action" onclick="interagir('alimentar')">Alimentar</button>
        <button class="btn-action" onclick="interagir('carinho')">Carinho</button>
        <button class="btn-action" onclick="interagir('passear')">Passear</button>
        <button class="btn-action btn-descanso" onclick="interagir('descansar')">Descansar</button>
        <button class="btn-action btn-higiene" onclick="interagir('banho')">Dar Banho</button>
        <button class="btn-action btn-higiene" onclick="interagir('rosto')">Lavar Rosto</button>
        <button class="btn-action btn-higiene" onclick="interagir('maos')" style="grid-column: span 2;">Lavar M√£os</button>
        
        <button id="reset-btn" onclick="location.reload()">NOVO JOGO</button>
    </div>
    <div id="msg"></div>
</div>

<script>
    let fome = 20, felicidade = 80, higiene = 100, energia = 100, idade = 0;
    let vivo = true, nomeGatinho = "Gatinho";
    let gameLoop;
    
    const tempos = [20000, 30000, 40000, 50000, 60000];
    const nomesNivel = ["N√çVEL 01", "N√çVEL 02", "N√çVEL 03", "N√çVEL 04", "N√çVEL 05"];
    const descNivel = ["R√°pido (20s)", "Normal (30s)", "Devagar (40s)", "Lento (50s)", "Muito Lento (01 min)"];
    let tempoAtual = tempos[0];

    const elEmoji = document.getElementById('pet-emoji');
    const elBalao = document.getElementById('balao');

    function mudarVelocidade(index) {
        tempoAtual = tempos[index];
        document.getElementById('speed-title').innerText = "VELOCIDADE: " + nomesNivel[index];
        document.getElementById('speed-desc').innerText = descNivel[index];
        if (vivo) iniciarLoop();
    }

    function iniciarLoop() {
        clearInterval(gameLoop);
        gameLoop = setInterval(() => {
            if (vivo) {
                idade++;
                fome += 7;
                felicidade -= 12;
                higiene -= 10;
                energia -= 8;
                verificarMorte();
                atualizarInterface();
            }
        }, tempoAtual);
    }

    function verificarMorte() {
        if (fome >= 100 || felicidade <= 0 || higiene <= 0 || energia <= 0) {
            vivo = false;
            finalizarJogo();
        }
    }

    function falar(texto, tempo = 3000) {
        if (!vivo) return;
        elBalao.innerText = texto;
        elBalao.style.display = 'block';
        setTimeout(() => { if(vivo) elBalao.style.display = 'none'; }, tempo);
    }

    function criarParticula(emoji) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.innerText = emoji;
        p.style.left = (Math.random() * 60 + 20) + '%';
        document.getElementById('container').appendChild(p);
        setTimeout(() => p.remove(), 2000);
    }

    function atualizarInterface() {
        document.getElementById('fome-bar').style.width = fome + "%";
        document.getElementById('felicidade-bar').style.width = felicidade + "%";
        document.getElementById('higiene-bar').style.width = higiene + "%";
        document.getElementById('energia-bar').style.width = energia + "%";
        document.getElementById('idade-val').innerText = idade;
        
        const elMsg = document.getElementById('msg');
        if (vivo) {
            let avisos = [];
            if (felicidade <= 40) avisos.push(nomeGatinho + " est√° triste! üò¢");
            else if (fome >= 70) avisos.push(nomeGatinho + " tem fome! üçñ");
            else if (higiene <= 30) avisos.push("Que sujeira! üßº");
            else if (energia <= 30) avisos.push(nomeGatinho + " est√° exausto! üí§");

            if (avisos.length > 0) {
                elEmoji.classList.add('critical');
                elMsg.innerHTML = `<span style="color: var(--danger)">${avisos[0]}</span>`;
            } else {
                elEmoji.classList.remove('critical');
                elMsg.innerHTML = `<span style="color: var(--success)">${nomeGatinho} est√° √≥timo! ‚ú®</span>`;
            }
        }
    }

    function finalizarJogo() {
        clearInterval(gameLoop);
        elEmoji.innerText = "üíÄ";
        elEmoji.classList.add('dead');
        elBalao.style.display = 'none';
        
        document.getElementById('msg').innerHTML = `
            <div style="color: var(--danger); font-size: 1.2rem; font-weight: bold;">FIM DE JOGO</div>
            <div class="final-score">${nomeGatinho} viveu ${idade} dias!</div>
        `;
        
        document.querySelectorAll('.btn-action').forEach(b => b.disabled = true);
        document.getElementById('speed-slider').disabled = true;
        document.getElementById('reset-btn').style.display = 'block';
    }

    function interagir(tipo) {
        if (!vivo) return;
        elEmoji.classList.remove('anim-comer', 'anim-carinho', 'anim-passear', 'anim-limpar', 'anim-dormir');
        void elEmoji.offsetWidth;

        switch(tipo) {
            case 'alimentar':
                fome = Math.max(0, fome - 30);
                higiene = Math.max(0, higiene - 15); // Comer suja!
                felicidade = Math.min(100, felicidade + 5);
                elEmoji.classList.add('anim-comer');
                criarParticula('üçé');
                falar("Nhame! üòã");
                break;
            case 'carinho':
                felicidade = Math.min(100, felicidade + 20);
                fome = Math.min(100, fome + 5); // Fica com fominha
                elEmoji.classList.add('anim-carinho');
                criarParticula('‚ù§Ô∏è');
                falar("Miau! ‚ù§Ô∏è");
                break;
            case 'passear':
                felicidade = Math.min(100, felicidade + 30);
                energia = Math.max(0, energia - 25); // Passear cansa muito!
                higiene = Math.max(0, higiene - 20); // E suja!
                fome = Math.min(100, fome + 10);
                elEmoji.classList.add('anim-passear');
                falar("Uhuu! üå≥");
                break;
            case 'descansar':
                energia = Math.min(100, energia + 40);
                fome = Math.min(100, fome + 15); // Acorda com fome
                felicidade = Math.max(0, felicidade - 5);
                elEmoji.classList.add('anim-dormir');
                criarParticula('üí§');
                falar("Zzz... üò¥");
                break;
            case 'banho':
                higiene = 100;
                felicidade = Math.max(0, felicidade - 10); // Gatos n√£o amam banho
                energia = Math.max(0, energia - 5);
                elEmoji.classList.add('anim-limpar');
                criarParticula('üßº');
                falar("Limpinho! ‚ú®");
                break;
            case 'rosto':
                higiene = Math.min(100, higiene + 30);
                felicidade = Math.min(100, felicidade + 5);
                elEmoji.classList.add('anim-limpar');
                criarParticula('üí¶');
                break;
            case 'maos':
                higiene = Math.min(100, higiene + 15);
                elEmoji.classList.add('anim-limpar');
                criarParticula('üßº');
                break;
        }
        
        // Garante que os valores n√£o saiam do limite 0-100
        fome = Math.min(100, Math.max(0, fome));
        felicidade = Math.min(100, Math.max(0, felicidade));
        higiene = Math.min(100, Math.max(0, higiene));
        energia = Math.min(100, Math.max(0, energia));

        verificarMorte();
        atualizarInterface();
    }

    window.onload = () => {
        let n = prompt("Qual o nome do seu gatinho?", "Frajola");
        if(n) nomeGatinho = n;
        atualizarInterface();
        iniciarLoop();
        falar("Oi! Eu sou o " + nomeGatinho);
    };
</script>
</body>
</html>
