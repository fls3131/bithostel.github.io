<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Bingo Arena Mobile</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --primary: #e94560; --bg: #1a1a2e; --card-bg: #16213e; 
            --win: #2ecc71; --accent: #f1c40f; --gold: #ffd700; 
            --money: #27ae60; --loss: #ff4757; 
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); 
            color: white; 
            margin: 0; 
            height: 100vh;
            height: 100dvh; 
            display: flex; 
            flex-direction: column; 
            overflow: hidden; 
        }

        /* --- NOVOS ESTILOS DO HIST√ìRICO --- */
        #history-modal { display: none; position: fixed; top:0; left:0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center; padding: 20px; }
        .history-card { background: var(--card-bg); width: 100%; max-width: 400px; border-radius: 12px; border: 1px solid var(--accent); display: flex; flex-direction: column; max-height: 80vh; }
        .history-list { overflow-y: auto; padding: 15px; flex-grow: 1; }
        .history-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #0f3460; font-size: 0.85rem; }
        .hist-pos { color: var(--win); }
        .hist-neg { color: var(--loss); }
        .money-display { cursor: pointer; transition: 0.2s; }
        .money-display:active { transform: scale(0.95); background: rgba(39, 174, 96, 0.3); }
        /* --------------------------------- */

        .ranking-container {
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            max-height: 200px; 
        }

        .ranking-collapsed {
            max-height: 0px !important;
        }

        .ranking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.2);
            padding: 8px 15px;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
        }

        #toggle-ranking-btn {
            background: var(--primary);
            padding: 4px 10px;
            font-size: 0.6rem;
            height: auto;
        }

        #auth-overlay, #withdraw-modal, #deposit-modal { 
            position: fixed; top:0; left:0; width: 100%; height: 100%; 
            background: rgba(26, 26, 46, 0.98); z-index: 9999; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            padding: 20px;
        }
        #withdraw-modal, #deposit-modal { display: none; background: rgba(0,0,0,0.9); }
        .auth-card { 
            background: var(--card-bg); padding: 25px; border-radius: 12px; 
            border: 2px solid var(--primary); text-align: center; width: 100%; max-width: 400px; 
        }

        .main-layout { 
            display: flex; 
            flex-direction: column; 
            height: 100vh;
            height: 100dvh; 
        }

        .top-panel { 
            background: var(--card-bg); 
            padding: 8.5px; 
            border-bottom: 2px solid var(--primary); 
            flex-shrink: 0;
            z-index: 10;
        }

        .header-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        .money-display { 
            background: rgba(39, 174, 96, 0.15); 
            border: 1px solid var(--money); 
            border-radius: 8px; padding: 10px; text-align: center; 
        }
        .money-value { font-size: 1.3rem; font-weight: 900; color: #fff; }

        .ball-display {
            background: #0f3460;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--accent);
        }
        #ball { font-size: 2.5rem; color: var(--accent); font-weight: 900; }

        .btn-group-main { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 8px; 
        }

        .arena { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding: 15px 10px; 
            display: flex; 
            flex-direction: column; 
            gap: 20px; 
            align-items: center;
            background: rgba(0,0,0,0.2);
        }

        .bingo-card { 
            background: var(--card-bg); 
            padding: 10px; 
            border-radius: 12px; 
            border: 1px solid #333; 
            width: 100%; 
            max-width: 380px; 
        }
        .bingo-card.player { border: 2px solid var(--primary); box-shadow: 0 0 15px rgba(233,69,96,0.3); }

        .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; }
        .cell { 
            aspect-ratio: 0.9 / 1; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background: #0f3460; 
            border-radius: 6px; 
            font-size: 1.1rem; 
            font-weight: bold; 
        }
        .cell.marked { background: var(--primary); }
        .cell.line-win { background-color: var(--win) !important; color: #ffffff !important; box-shadow: 0 0 10px var(--win); transform: scale(1.05); transition: 0.3s; }
        .cell.free { background: #533483; color: var(--accent); }

        .bottom-panel { 
            background: var(--card-bg); 
            padding: 10px 10px; 
            border-top: 2px solid #333; 
            flex-shrink: 0;
            padding-bottom: calc(40px + env(safe-area-inset-bottom));
            z-index: 100;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        button { 
            padding: 12px; border: none; border-radius: 8px; 
            font-weight: bold; cursor: pointer; font-size: 0.85rem; color: white; 
        }
        .btn-manual { background: var(--primary); height: 50px; }
        .btn-auto { background: #3498db; height: 50px; }
        .btn-reset { background: #533483; grid-column: span 2; height: 50px; }
        .btn-util { background: #444; font-size: 0.7rem; }

        .leader-item { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #0f3460; font-size: 0.85rem; }
        .leader-item.me { background: var(--accent); color: var(--bg); font-weight: 900; border-radius: 4px; }

        #history-grid { display: flex; gap: 5px; overflow-x: auto; padding: 5px; background: #0f3460; border-radius: 4px; margin-top: 8px; }
        .hist-ball { min-width: 30px; height: 30px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; }
        
        #money-toast { 
            position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%); 
            z-index: 30000; font-size: 1.5rem; font-weight: 900; pointer-events: none; 
            opacity: 0; transition: 0.4s; text-align: center; width: 90%; 
            background: rgba(0,0,0,0.9); padding: 20px; border-radius: 15px;
            border: 2px solid var(--accent); box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }
        .toast-show { opacity: 1 !important; transform: translate(-50%, -40%) scale(1) !important; }

        /* Estilos espec√≠ficos para a tela de PIN */
        .info-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            margin-bottom: 15px;
            text-align: left;
            border-left: 3px solid var(--accent);
        }
    </style>
</head>
<body>
    <div id="money-toast"></div>

    <div id="history-modal">
        <div class="history-card">
            <div style="padding: 15px; border-bottom: 1px solid var(--accent); display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin:0; color: var(--accent);">EXTRATO DA CARTEIRA</h3>
                <button id="close-history" style="background: #444; padding: 5px 10px;">X</button>
            </div>
            <div id="wallet-history-list" class="history-list"></div>
        </div>
    </div>

    <div id="deposit-modal">
        <div class="auth-card" style="border-color: #3498db;">
            <h2 style="color: #3498db; margin: 0 0 15px 0;">DEPOSITAR PIX</h2>
            <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin-bottom: 15px;">
                <button id="dep-10" style="background:#3498db">R$ 10,00</button>
                <button id="dep-50" style="background:#3498db">R$ 50,00</button>
                <button id="dep-100" style="background:#3498db">R$ 100,00</button>
            </div>
            <button id="close-dep" style="background: #555; width: 100%;">VOLTAR</button>
        </div>
    </div>

    <div id="withdraw-modal">
        <div class="auth-card">
            <h2 style="color: var(--win); margin: 0 0 10px 0;">SAQUE PIX</h2>
            <p id="wd-balance">R$ 0,00</p>
            <input type="text" id="pix-key" placeholder="Chave Pix" style="width:100%; padding:12px; margin:5px 0; border-radius:8px; border:none;">
            <input type="number" id="withdraw-amount" placeholder="Valor M√≠n: 20" style="width:100%; padding:12px; margin:5px 0; border-radius:8px; border:none;">
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button id="close-wd" style="background: #555; flex: 1;">VOLTAR</button>
                <button id="confirm-wd" style="background: var(--money); flex: 1;">SACAR</button>
            </div>
        </div>
    </div>

    <div id="auth-overlay">
        <div class="auth-card">
            <h2 id="auth-title" style="color: var(--primary); margin-bottom: 10px;">PRIMEIRO ACESSO</h2>
            
            <div id="auth-info" class="info-box">
                <strong>üîí Seguran√ßa da Conta</strong><br>
                Este PIN de 4 d√≠gitos protege seu saldo e progresso. N√£o o compartilhe com ningu√©m.
            </div>

            <p id="auth-instruction" style="font-size: 0.9rem; margin-bottom: 10px;">Crie seu PIN de 4 d√≠gitos num√©ricos:</p>
            
            <input type="password" id="pass-input" maxlength="4" inputmode="numeric" placeholder="****" style="letter-spacing:15px; font-size:2rem; width:100%; text-align:center; padding:10px; margin-bottom:15px; border-radius:8px; border: 2px solid #333; background: #0f3460; color: white;">
            
            <button id="btn-unlock" style="background: var(--primary); width: 100%; font-size: 1.2rem; margin-bottom: 15px;">CONFIRMAR E ENTRAR</button>
            
            <div style="font-size: 0.7rem; color: #888;">
                Ao clicar em entrar, voc√™ concorda com as regras da Arena.
            </div>
        </div>
    </div>

    <div class="main-layout">
        <div class="top-panel">
            <div class="header-grid">
                <div class="money-display" id="open-history-trigger">
                    <div style="font-size:0.6rem; color:var(--accent)">MEU SALDO (Clique p/ Ver)</div>
                    <div class="money-value" id="balance">R$ 0,00</div>
                </div>
                <div class="ball-display">
                    <span id="ball">--</span>
                </div>
            </div>
            <div class="btn-group-main">
                <button id="draw-btn" class="btn-manual">SORTEAR UMA PEDRA</button>
                <button id="auto-btn" class="btn-auto">SORTEAR AUTO</button>
                <button id="new-round-btn" class="btn-reset">NOVA RODADA (R$ 5,00)</button>
            </div>
            <div id="history-grid"></div>
        </div>

        <div class="arena" id="arena"></div>

        <div class="bottom-panel">
            <div class="ranking-header" id="header-ranking">
                <h4 style="margin: 0; color: var(--accent); font-size: 0.8rem;">RANKING AO VIVO (Exibir e Ocultar)</h4>
                <button id="toggle-ranking-btn">ESCONDER</button>
            </div>

            <div id="ranking-body" class="ranking-container">
                <div id="leader-list"></div>
            </div>
            
            <div class="action-grid">
                <button id="open-dep" class="btn-util" style="background: #3498db;">DEPOSITAR üí∏</button>
                <button id="open-wd" class="btn-util" style="background: var(--money);">SACAR üí∏</button>
                <button id="toggle-sound" class="btn-util" style="background: #9b59b6;">SOM: ON üîä</button>
                <button id="manual-btn" class="btn-util">AJUDA ‚ùì</button>
                <button id="btn-logout" class="btn-util" style="background: #333; grid-column: span 2;">BLOQUEAR üîí</button>
            </div>
        </div>
    </div>

<script>
(function() {
    const somSorteio = new Audio('sorteio.mp3');
    const somDinheiro = new Audio('dinheiro.mp3');
    const somMarca = new Audio('marca.mp3');
    const somBingo = new Audio('bingo.mp3');
    const somLinha = new Audio('linha.mp3');
    const somGeral = new Audio('geral.mp3');

    let drawn = [], players = [], firstLineOut = false, gameOver = false, autoInterval = null;
    let totalBalance = 0;
    let costDeducted = false;
    let soundEnabled = true; 
    
    let walletHistory = JSON.parse(localStorage.getItem('bingo_wallet_history') || '[]');

    const ROUND_COST = 5.00, LINE_PRIZE = 15.00, BINGO_PRIZE = 25.00;
    const nomesComuns = ["JO√ÉO", "MARIA", "PEDRO", "ANA", "LUCAS", "CARLA", "BRUNO", "JULIA", "MARCOS", "BEATRIZ"];

    // Ajuste inicial de interface baseado na exist√™ncia de PIN
    const savedPass = localStorage.getItem('bingo_vault_pass');
    if(savedPass) {
        document.getElementById('auth-title').innerText = "ACESSO RESTRITO";
        document.getElementById('auth-title').style.color = "var(--win)";
        document.getElementById('auth-instruction').innerText = "Insira seu PIN cadastrado para entrar:";
        document.getElementById('btn-unlock').innerText = "ENTRAR NA ARENA";
        document.getElementById('auth-info').innerHTML = "<strong>üîì Bem-vindo de volta!</strong><br>Digite seu PIN de 4 d√≠gitos para acessar sua carteira e o Bingo Arena.";
    }

    function playSound(audio) {
        if (soundEnabled) {
            audio.currentTime = 0;
            audio.play().catch(() => {});
        }
    }

    function saveTransaction(desc, value) {
        const transaction = {
            date: new Date().toLocaleString('pt-BR'),
            desc: desc,
            value: value
        };
        walletHistory.unshift(transaction);
        if(walletHistory.length > 50) walletHistory.pop();
        localStorage.setItem('bingo_wallet_history', JSON.stringify(walletHistory));
    }

    function showToast(text, color) {
        const toast = document.getElementById('money-toast');
        toast.innerText = text; toast.style.color = color;
        toast.classList.add('toast-show');
        setTimeout(() => toast.classList.remove('toast-show'), 5000);
    }

    function updateBalanceDisplay() {
        document.getElementById('balance').innerText = `R$ ${totalBalance.toFixed(2).replace('.', ',')}`;
        localStorage.setItem('bingo_arena_balance', totalBalance.toString());
    }

    function processPayment() {
        if (!costDeducted && !gameOver) {
            if (totalBalance < ROUND_COST) { alert("Saldo insuficiente!"); return false; }
            totalBalance -= ROUND_COST;
            saveTransaction("Entrada Rodada", -5.00);
            costDeducted = true;
            updateBalanceDisplay();
            showToast(`-R$ 5,00`, "#ffffff");
            return true;
        }
        return true;
    }

    function drawBall() {
        if(gameOver || drawn.length >= 75) return;
        playSound(somSorteio);
        let b; do { b = Math.floor(Math.random() * 75) + 1; } while(drawn.includes(b));
        drawn.push(b);
        document.getElementById('ball').innerText = b;
        
        let h = document.createElement('div'); h.className = "hist-ball";
        h.innerText = b; document.getElementById('history-grid').prepend(h);
        document.querySelectorAll(`[data-num="${b}"]`).forEach(c => c.classList.add('marked'));

        players.forEach(p => { 
            if(p.nums.includes(b)) {
                p.marks++; 
                if(p.id === 1) { playSound(somMarca); }
            }
        });

        let sorted = [...players].sort((a,b) => b.marks - a.marks);
        let list = document.getElementById('leader-list'); list.innerHTML = "";
        sorted.slice(0, 3).forEach(p => list.innerHTML += `<div class="leader-item ${p.id===1?'me':''}"><span>${p.name}</span><span>${p.marks}/25</span></div>`);

        players.forEach(p => {
            if(!firstLineOut) {
                for(let r=0; r<5; r++) {
                    let win = true;
                    let lineCells = [];
                    for(let c=0; c<5; c++) { 
                        let cell = document.getElementById(`p${p.id}-c${r*5+c}`);
                        lineCells.push(cell);
                        if(!cell.classList.contains('marked')) win = false;
                    }
                    if(win) {
                        firstLineOut = true; 
                        playSound(somLinha);
                        lineCells.forEach(cell => cell.classList.add('line-win'));
                        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });

                        if(p.id === 1) { 
                            totalBalance += LINE_PRIZE; 
                            saveTransaction("Pr√™mio Linha", LINE_PRIZE);
                            updateBalanceDisplay(); 
                            playSound(somDinheiro);
                            showToast(`LINHA: VOC√ä! +R$ ${LINE_PRIZE.toFixed(2).replace('.', ',')}`, "#2ecc71");
                        } else {
                            showToast(`LINHA: ${p.name}!`, "#ffffff");
                        }
                    }
                }
            }
            if(p.marks === 25 && !gameOver) {
                gameOver = true; 
                if(autoInterval) { clearInterval(autoInterval); autoInterval = null; }
                if(p.id === 1) { 
                    totalBalance += BINGO_PRIZE; 
                    saveTransaction("Pr√™mio BINGO", BINGO_PRIZE);
                    updateBalanceDisplay(); 
                    playSound(somDinheiro);
                    showToast(`BINGO! VOC√ä GANHOU R$ ${BINGO_PRIZE.toFixed(2).replace('.', ',')}`, "#ffd700");
                    playSound(somBingo);
                } else {
                    showToast(`BINGO: ${p.name}!`, "#ffffff");
                }
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }
        });
    }

    function initGame() {
        const arena = document.getElementById('arena'); arena.innerHTML = ""; players = [];
        let nomes = [...nomesComuns].sort(() => Math.random() - 0.5);
        for(let i=1; i<=10; i++) {
            let n = []; while(n.length < 24) { let r = Math.floor(Math.random() * 75) + 1; if(!n.includes(r)) n.push(r); } n.splice(12, 0, 0);
            let p = { id: i, name: i === 1 ? "VOC√ä" : nomes[i-2], nums: n, marks: 1 };
            players.push(p);
            let card = document.createElement('div'); card.className = `bingo-card ${i===1?'player':''}`;
            card.innerHTML = `<h5 style="margin:5px 0; text-align:center;">${p.name}</h5><div class="grid" id="g-${i}"></div>`;
            arena.appendChild(card);
            p.nums.forEach((num, idx) => {
                let cell = document.createElement('div');
                cell.className = 'cell' + (num === 0 ? ' marked free' : '');
                cell.innerText = num === 0 ? '‚òÖ' : num;
                cell.id = `p${i}-c${idx}`;
                if(num !== 0) cell.setAttribute('data-num', num);
                document.getElementById(`g-${i}`).appendChild(cell);
            });
        }
    }

    document.getElementById('btn-unlock').onclick = () => {
        const agora = Date.now();
        const bloqueadoAte = parseInt(localStorage.getItem('bingo_lockout_until') || 0);

        if (agora < bloqueadoAte) {
            const restantes = Math.ceil((bloqueadoAte - agora) / 1000);
            alert(`Acesso bloqueado. Tente novamente em ${restantes} segundos.`);
            return;
        }

        const input = document.getElementById('pass-input').value;
        const currentSavedPass = localStorage.getItem('bingo_vault_pass');

        if (!currentSavedPass) {
            if(input.length === 4) { 
                localStorage.setItem('bingo_vault_pass', input); 
                localStorage.removeItem('bingo_failed_attempts');
                alert("PIN criado com sucesso! Guarde-o bem.");
                login(); 
            } else {
                alert("O PIN deve conter exatamente 4 n√∫meros.");
            }
        } else if (input === currentSavedPass) {
            localStorage.removeItem('bingo_failed_attempts');
            localStorage.removeItem('bingo_lockout_until');
            login();
        } else {
            let falhas = parseInt(localStorage.getItem('bingo_failed_attempts') || 0) + 1;
            if (falhas >= 3) {
                localStorage.setItem('bingo_lockout_until', agora + 60000);
                localStorage.removeItem('bingo_failed_attempts');
                alert("Muitas tentativas incorretas. Bloqueado por 1 minuto.");
            } else {
                localStorage.setItem('bingo_failed_attempts', falhas);
                alert(`PIN incorreto. Tentativa ${falhas} de 3.`);
            }
        }
    };

    function login() {
        sessionStorage.setItem('bingo_authenticated', 'true');
        document.getElementById('auth-overlay').style.display = 'none';
        totalBalance = parseFloat(localStorage.getItem('bingo_arena_balance')) || 50.00;
        updateBalanceDisplay();
        initGame();
    }

    document.getElementById('draw-btn').onclick = () => { if(processPayment()) drawBall(); };
    document.getElementById('auto-btn').onclick = function() {
        if (autoInterval) { clearInterval(autoInterval); autoInterval = null; this.innerText = "SORTEAR AUTO"; }
        else if (!gameOver && processPayment()) { this.innerText = "PAUSAR AUTO"; autoInterval = setInterval(drawBall, 500); }
    };

    document.getElementById('new-round-btn').onclick = () => {
        if (confirm("Deseja iniciar uma nova rodada? Isso custar√° R$ 5,00 do seu saldo.")) {
            location.reload();
        }
    };

    document.getElementById('toggle-sound').onclick = function() {
        soundEnabled = !soundEnabled;
        this.innerText = soundEnabled ? "SOM: ON üîä" : "SOM: OFF üîá";
        this.style.background = soundEnabled ? "#9b59b6" : "#666";
    };

    document.getElementById('open-dep').onclick = () => document.getElementById('deposit-modal').style.display = 'flex';
    document.getElementById('close-dep').onclick = () => document.getElementById('deposit-modal').style.display = 'none';
    
    document.getElementById('dep-10').onclick = () => { totalBalance += 10; saveTransaction("Dep√≥sito PIX", 10); updateBalanceDisplay(); playSound(somDinheiro); document.getElementById('deposit-modal').style.display = 'none'; };
    document.getElementById('dep-50').onclick = () => { totalBalance += 50; saveTransaction("Dep√≥sito PIX", 50); updateBalanceDisplay(); playSound(somDinheiro); document.getElementById('deposit-modal').style.display = 'none'; };
    document.getElementById('dep-100').onclick = () => { totalBalance += 100; saveTransaction("Dep√≥sito PIX", 100); updateBalanceDisplay(); playSound(somDinheiro); document.getElementById('deposit-modal').style.display = 'none'; };
    
    document.getElementById('open-wd').onclick = () => { document.getElementById('withdraw-modal').style.display = 'flex'; document.getElementById('wd-balance').innerText = `Saldo: R$ ${totalBalance}`; };
    document.getElementById('close-wd').onclick = () => document.getElementById('withdraw-modal').style.display = 'none';
    
    document.getElementById('confirm-wd').onclick = () => {
        const val = parseFloat(document.getElementById('withdraw-amount').value);
        if(val >= 20 && totalBalance >= val) {
            totalBalance -= val;
            saveTransaction("Saque PIX", -val);
            updateBalanceDisplay();
            alert("Saque solicitado!");
            document.getElementById('withdraw-modal').style.display = 'none';
        } else { alert("Valor inv√°lido ou saldo insuficiente."); }
    };

    document.getElementById('open-history-trigger').onclick = () => {
        const list = document.getElementById('wallet-history-list');
        list.innerHTML = walletHistory.length === 0 ? '<p style="text-align:center">Sem movimenta√ß√µes.</p>' : '';
        walletHistory.forEach(item => {
            const isPos = item.value > 0;
            list.innerHTML += `
                <div class="history-item">
                    <div>
                        <div style="font-weight:bold">${item.desc}</div>
                        <div style="font-size:0.7rem; color:#aaa">${item.date}</div>
                    </div>
                    <div class="${isPos ? 'hist-pos' : 'hist-neg'}">
                        ${isPos ? '+' : ''}R$ ${Math.abs(item.value).toFixed(2).replace('.', ',')}
                    </div>
                </div>`;
        });
        document.getElementById('history-modal').style.display = 'flex';
    };
    document.getElementById('close-history').onclick = () => document.getElementById('history-modal').style.display = 'none';

    document.getElementById('btn-logout').onclick = () => { sessionStorage.removeItem('bingo_authenticated'); location.reload(); };

    if (sessionStorage.getItem('bingo_authenticated') === 'true') login();
})();

    const rankingHeader = document.getElementById('header-ranking');
    const rankingBody = document.getElementById('ranking-body');
    const toggleBtn = document.getElementById('toggle-ranking-btn');

    rankingHeader.onclick = () => {
        const isCollapsed = rankingBody.classList.toggle('ranking-collapsed');
        toggleBtn.innerText = isCollapsed ? "MOSTRAR" : "ESCONDER";
        toggleBtn.style.background = isCollapsed ? "var(--win)" : "var(--primary)";
    };
</script>
</body>
</html>
